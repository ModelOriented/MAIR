{
  "abstractText": "Over the last decade, machine learning has been applied to many engineering and scientific disciplines, often achieving high predictive accuracy. Recent years, however, have witnessed an increased focus on interpretability and the use of machine learning to inform policy analysis and decision making. This paper applies machine learning to examine travel behavior and, in particular, on modeling changes in travel modes when individuals are presented with a novel (on-demand) mobility option. It addresses the following question: Can machine learning be applied to model individual taste heterogeneity (preference heterogeneity for travel modes and response heterogeneity to travel attributes) in travel mode choice? This paper first develops a high-accuracy classifier to predict mode-switching behavior under a hypothetical Mobility-on-Demand Transit system (i.e., stated-preference data), which represents the case study underlying this research. We show that this classifier naturally captures individual heterogeneity available in the data. Moreover, the paper derives insights on heterogeneous switching behaviors through the generation of marginal effects and elasticities by current travel mode, partial dependence plots, individual conditional expectation plots. The paper also proposes two new model-agnostic interpretation tools for machine learning, i.e., conditional partial dependence plots and conditional individual partial dependence plots, specifically designed to examine response heterogeneity. The results on the case study show that the machine-learning classifier, together with model-agnostic interpretation tools, provides valuable insights on travel mode switching behavior for different individuals and population segments. For example, the existing drivers are more sensitive to additional pickups than people using other travel modes, and current transit users are generally willing to share rides but reluctant to take any additional transfers. These insights can be used to inform transportation planning and the design of new mobility services.",
  "authors": [
    {
      "affiliations": [],
      "name": "Xilei Zhao"
    },
    {
      "affiliations": [],
      "name": "Xiang Yanb"
    },
    {
      "affiliations": [],
      "name": "Pascal Van Hentenryck"
    }
  ],
  "id": "SP:96c4ae03ab3bf8d3ff65968b26f10a2bcd01c6cb",
  "references": [
    {
      "authors": [
        "J. Anable"
      ],
      "title": "Complacent Car Addicts\u2019 or \u2018Aspiring Environmentalists\u2019? Identifying travel behaviour",
      "year": 2005
    },
    {
      "authors": [
        "D.W. Apley"
      ],
      "title": "Visualizing the effects of predictor variables in black box supervised learning models",
      "venue": "segments using attitude theory. Transport Policy",
      "year": 2016
    },
    {
      "authors": [
        "S. Athey"
      ],
      "title": "Beyond prediction: Using big data for policy problems",
      "venue": "Science",
      "year": 2017
    },
    {
      "authors": [
        "L. Breiman"
      ],
      "title": "Bagging predictors. Machine Learning",
      "venue": "Research Part B: Methodological",
      "year": 1996
    },
    {
      "authors": [
        "F. Doshi-Velez",
        "B. Kim"
      ],
      "title": "Towards a rigorous science of interpretable machine learning",
      "year": 2017
    },
    {
      "authors": [
        "M. arXiv:1702.08608. Du",
        "N. Liu",
        "X. Hu"
      ],
      "title": "Techniques for interpretable machine learning",
      "year": 2018
    },
    {
      "authors": [
        "J.H. Friedman"
      ],
      "title": "Greedy function approximation: A gradient boosting machine",
      "venue": "Annals of Statistics,",
      "year": 2001
    },
    {
      "authors": [
        "A. 1189\u20131232. Goldstein",
        "A. Kapelner",
        "J. Bleich",
        "E. Pitkin"
      ],
      "title": "Peeking inside the black box",
      "year": 2015
    },
    {
      "authors": [
        "J. 44\u201365. Hagenauer",
        "M. Helbich"
      ],
      "title": "A comparative study of machine learning classifiers for modeling travel",
      "year": 2017
    },
    {
      "authors": [
        "T. Hastie",
        "R. Tibshirani",
        "J. Friedman"
      ],
      "title": "Expert Systems with Applications",
      "venue": "The Elements of Statistical Learning",
      "year": 2001
    },
    {
      "authors": [
        "H. Iseki",
        "B.D. Taylor"
      ],
      "title": "Not all transfers are created equal: Towards a framework relating transfer",
      "venue": "Pattern Analysis and Machine Intelligence",
      "year": 2009
    },
    {
      "authors": [
        "A. Lh\u00e9ritier",
        "M. Bocamazo",
        "T. Delahaye",
        "R. Acuna-Agost"
      ],
      "title": "Airline itinerary choice modeling using",
      "venue": "Transport Reviews",
      "year": 2018
    },
    {
      "authors": [
        "D. Modelling. Li",
        "T. Miwa",
        "T. Morikawa",
        "P. Liu"
      ],
      "title": "Incorporating observed and unobserved heterogeneity",
      "year": 2016
    },
    {
      "authors": [
        "A. Liaw",
        "M. Wiener"
      ],
      "title": "Classification and regression by randomForest",
      "venue": "R News",
      "year": 2002
    },
    {
      "authors": [
        "H.H. Zhang",
        "Y. Wu"
      ],
      "title": "Hard or soft classification? large-margin unified machines",
      "year": 2011
    },
    {
      "authors": [
        "A. Mah\u00e9o",
        "P. Kilby",
        "P. Van Hentenryck"
      ],
      "title": "Benders decomposition for the design of a hub and shuttle",
      "venue": "American Statistical Association",
      "year": 2017
    },
    {
      "authors": [
        "A. Science. McCallum",
        "K Nigam"
      ],
      "title": "A comparison of event models for naive bayes text classification",
      "year": 1998
    },
    {
      "authors": [
        "W.J. Murdoch",
        "C. Singh",
        "K. Kumbier",
        "R. Abbasi-Asl",
        "B. Yu"
      ],
      "title": "Interpretable machine learning: definitions, methods, and applications",
      "venue": "arXiv preprint arXiv:1901.04592",
      "year": 2019
    },
    {
      "authors": [
        "H. Omrani"
      ],
      "title": "Predicting travel mode of individuals by machine learning",
      "venue": "Transportation Research Procedia",
      "year": 2015
    },
    {
      "authors": [
        "G. Ridgeway"
      ],
      "title": "gbm: Generalized Boosted Regression Models. R package version 2.1.3",
      "venue": "URL https://CRAN.R-project.org/package=gbm",
      "year": 2017
    },
    {
      "authors": [
        "B. Ripley"
      ],
      "title": "tree: Classification and Regression Trees. R package version 1.0-37",
      "venue": "URL https://CRAN.R-project.org/package=tree",
      "year": 2016
    },
    {
      "authors": [
        "K.K. Srinivasan",
        "H.S. Mahmassani"
      ],
      "title": "Analyzing heterogeneity and unobserved structural effects in route-switching behavior under atis: a dynamic kernel logit formulation",
      "venue": "Transportation Research Part B: Methodological",
      "year": 2003
    },
    {
      "authors": [
        "L. Tang",
        "C. Xiong",
        "L. Zhang"
      ],
      "title": "Decision tree method for modeling travel mode switching in a dynamic behavioral process",
      "venue": "Transportation Planning and Technology",
      "year": 2015
    },
    {
      "authors": [
        "W.N. Venables",
        "B.D. Ripley"
      ],
      "title": "Modern Applied Statistics with S, 4th Edition",
      "year": 2002
    },
    {
      "authors": [
        "A. Vij",
        "J.L. Walker"
      ],
      "title": "2016. How, when and why integrated choice and latent variable models are latently useful",
      "venue": "Transportation Research Part B: Methodological",
      "year": 2016
    },
    {
      "authors": [
        "S. Wager",
        "S. Athey"
      ],
      "title": "Estimation and inference of heterogeneous treatment effects using random forests",
      "venue": "Journal of the American Statistical Association",
      "year": 2018
    },
    {
      "authors": [
        "G. Wahba"
      ],
      "title": "Soft and hard classification by reproducing kernel hilbert space methods",
      "venue": "Proceedings of the National Academy of Sciences",
      "year": 2002
    },
    {
      "authors": [
        "F. Wang",
        "C.L. Ross"
      ],
      "title": "Machine learning travel mode choices: Comparing the performance of an extreme gradient boosting model with a multinomial logit model",
      "venue": "Transportation Research Record: Journal of the Transportation Research Board",
      "year": 2018
    },
    {
      "authors": [
        "C. Xie",
        "J. Lu",
        "E. Parkany"
      ],
      "title": "Work travel mode choice modeling with data mining: decision trees and neural networks",
      "venue": "Transportation Research Record: Journal of the Transportation Research Board",
      "year": 2003
    },
    {
      "authors": [
        "X. Yan",
        "J. Levine",
        "X. Zhao"
      ],
      "title": "Integrating ridesourcing services with public transit: An evaluation of traveler responses combining revealed and stated preference data. Transportation Research Part C: Emerging Technologies",
      "year": 2018
    },
    {
      "authors": [
        "Q. Zhao",
        "T. Hastie"
      ],
      "title": "Causal interpretations of black-box models",
      "venue": "Journal of Business & Economic Statistics,",
      "year": 2017
    },
    {
      "authors": [
        "X. Zhao",
        "X. Yan",
        "A. Yu",
        "P. Van Hentenryck"
      ],
      "title": "Modeling stated preference for mobility-on-demand transit: A comparison of machine learning and logit models. arXiv preprint arXiv:1811.01315",
      "year": 2018
    }
  ],
  "sections": [
    {
      "text": "Over the last decade, machine learning has been applied to many engineering and scientific disciplines, often achieving high predictive accuracy. Recent years, however, have witnessed an increased focus on interpretability and the use of machine learning to inform policy analysis and decision making. This paper applies machine learning to examine travel behavior and, in particular, on modeling changes in travel modes when individuals are presented with a novel (on-demand) mobility option. It addresses the following question: Can machine learning be applied to model individual taste heterogeneity (preference heterogeneity for travel modes and response heterogeneity to travel attributes) in travel mode choice?\nThis paper first develops a high-accuracy classifier to predict mode-switching behavior under a hypothetical Mobility-on-Demand Transit system (i.e., stated-preference data), which represents the case study underlying this research. We show that this classifier naturally captures individual heterogeneity available in the data. Moreover, the paper derives insights on heterogeneous switching behaviors through the generation of marginal effects and elasticities by current travel mode, partial dependence plots, individual conditional expectation plots. The paper also proposes two new model-agnostic interpretation tools for machine learning, i.e., conditional partial dependence plots and conditional individual partial dependence plots, specifically designed to examine response heterogeneity. The results on the case study show that the machine-learning classifier, together with model-agnostic interpretation tools, provides valuable insights on travel mode switching behavior for different individuals and population segments. For example, the existing drivers are more sensitive to additional pickups than people using other travel modes, and current transit users are generally willing to share rides but reluctant to take any additional transfers. These insights can be used to inform transportation planning and the design of new mobility services.\nKeywords: Interpretable machine learning, Heterogeneity, Travel behavior, Mobility-on-Demand, Public transit\n\u2217Corresponding author. Email addresses: xilei.zhao@isye.gatech.edu (Xilei Zhao), jacobyan@umich.edu (Xiang Yan),\npvh@isye.gatech.edu (Pascal Van Hentenryck)\nar X\niv :1\n90 2.\n02 90\n4v 1\n[ cs\n.L G\n] 8\nF eb\n2 01"
    },
    {
      "heading": "1. Introduction",
      "text": "The popularity of machine learning is continuously increasing in transportation, with applications ranging from traffic engineering to travel demand forecasting and pavement material modeling, to name just a few. In general, machine learning achieves greater predictive accuracy compared to traditional methods. However, there is also a recognition in the field that a single metric, such as the predictive accuracy or mean squared error, provides an incomplete description of the complexities arising in the real world (Doshi-Velez and Kim, 2017). As a result, in many disciplines, increased attention is being devoted to the interpretability of machine-learning results.\nThis paper applies machine learning to model travel behavior and, in particular, to model the switching from traveler\u2019s usual commute travel modes to a novel Mobility-on-Demand (MOD) option. Previous studies have applied Machine learning to model travel behavior (e.g., Hagenauer and Helbich, 2017; Tang et al., 2015; Xie et al., 2003; Zhao et al., 2018). These studies often find that machine learning can predict individual travel-mode choice more accurately than traditional random utility models, the de facto standard in travelbehavior modeling. Nonetheless, previous work rarely discuss how to interpret machinelearning models and derive behavioral insights from the model outputs in order to inform transportation planning and policymaking. These are areas where random utility models typically excel due to their microeconomic foundations and the natural interpretations of the utility functions.\nThis paper extends the applications of machine-learning methods in travel-mode modeling from a mere focus on prediction to detailed behavioral interpretations. Its primary goal is to derive behavioral insights from machine-learning methods that can then be used to inform transportation planning and policy intervention. More specifically, the paper examines individual taste heterogeneity, an essential research topic in travel behavior modeling that has been a primary focus within the random utility framework (e.g., Bhat, 2000; Bhat et al., 2016; Li et al., 2016; Srinivasan and Mahmassani, 2003; Vij and Walker, 2016). To our knowledge, the application of interpretable machine learning to model heterogeneity in travel behavior is novel and is largely absent from the existing literature.\nThis paper provides a case study of applying machine learning to model heterogeneity in mode switching behavior, in the context of a proposed MOD Transit system that integrates fixed-route services and on-demand shuttles (Mahe\u0301o et al., 2017). It first derives a high-fidelity predictive model based on machine learning. The paper then shows that the best-performing machine-learning model (Boosting trees [BOOST]) can naturally segment the entire population and capture heterogeneous mode-switching behavior. Specifically, the paper demonstrates that behavioral insights can be revealed through the generation of marginal effects and elasticities for different market segments, partial dependence plots (PDPs), and individual conditional expectation (ICE) plots. Moreover, the paper proposes two new concepts, conditional partial dependence plots (CPDPs) and conditional individual partial dependence plots (CIPDPs), which allows machine learning to capture taste heterogeneity between and across different market segments. As the results of the case study suggest, these novel tools can generate valuable insights regarding the potential adoption of\nthe MOD Transit system and the impact of the underlying design decisions. The rest of the paper is organized as follows. Section 2 summarizes the research background and includes three major parts, i.e., machine-learning applications in travel behavior modeling, modeling heterogeneity in travel behavior, and interpretable machine learning. Section 3 describes the methodological framework underlying this paper: It discusses the use of machine learning for travel choice modeling and available tools for interpreting the heterogeneous mode switching behavior. In addition, it presents two novel tools, CPDPs and CIPDPs, which allow for the generation of more behavioral insights by applying market segmentation. Section 4 describes a case study, which includes the data description, the specification of machine-learning classifiers, and the training, validation, and testing procedure. Section 5 presents results on the predictive capability of machine learning, PDPs and CPDPs, ICE plots and CIPDPs, and marginal effects and elasticities for different market segments. Finally, Section 6 summarizes the findings, identifies the benefits and limitations of the proposed approach, and suggests future research directions."
    },
    {
      "heading": "2. Research Background",
      "text": ""
    },
    {
      "heading": "2.1. Machine Learning Applications in Travel Behavior Modeling",
      "text": "In recent years, researchers started to apply machine-learning methods to model individual travel behavior (e.g., Hagenauer and Helbich, 2017; Tang et al., 2015; Wang and Ross, 2018; Xie et al., 2003). For example, Xie et al. (2003) applied decision trees and neural networks (NN) to model individual mode choice and showed that these two models could improve the predictive accuracy of the multinomial logit model. Later, Tang et al. (2015) also applied decision trees to model travel mode switching behavior and obtained higher accuracy than logit models in most cases. More recently, Hagenauer and Helbich (2017) provided a comparison of various machine-learning classifiers for modeling travel mode choice, focusing primarily on predictive accuracy. Wang and Ross (2018) found that the extreme gradient boosting model substantially exceeded the prediction performance of the multinomial logit model when modeling travel mode choices.\nEven though machine learning has demonstrated its strength in mode-choice predictions, there has been little discussion regarding interpreting the machine learning model outputs to extract behavioral insights. That is to say, knowledge on the underlying decision rules that machine learning uses for travel-behavior prediction is lacking. Zhao et al. (2018) provides an early probe into this issue. They conducted a comprehensive comparison between machine learning and random utility models and found that that machine learning can not only offer a more flexible modeling structure and achieve higher predictive accuracy than traditional logit models, but also produce comparable behavioral outputs such as marginal effects and elasticities."
    },
    {
      "heading": "2.2. Modeling taste Heterogeneity in Travel Behavior",
      "text": "Travel behavior heterogeneity has been extensively studied within the random utility modeling framework. There are two types of taste heterogeneity: one is preference heterogeneity, which refers to the varying levels of preference for different travel modes across\nindividuals; the other is response heterogeneity, which indicates travelers\u2019 varying levels of sensitivity to changes in travel attributes. From a modeler\u2019s perspective, taste heterogeneity can be divided into two parts, i.e., observed and unobserved. Observed heterogeneity can be captured by introducing observed individual socio-demographic or behavioral characteristics as alternative specific variables and/or by capturing interactions between level-of-service variables and observed individual features, e.g., by applying a market segmentation approach or adding interaction terms (Bhat, 2000). The market segmentation approach means to select subgroups from a population in advance based on the known characteristics and declare them as \u201csegments,\u201d aiming at analyzing a manageable number of groups that share welldefined underlying features and generating more creative and better-targeted policies for different groups (Anable, 2005). On the other hand, unobserved heterogeneity is usually caused by unobserved individual features, such as individuals\u2019 intrinsic bias towards different travel modes or their varying degrees of sensitivity to level-of-service attributes (Bhat, 2000). To account for unobserved heterogeneity, researchers usually applied mixed logit models to fit random coefficients for explanation variables and/or to fit flexible error terms (the independent Gumbel distributed part plus the correlated normal distributed part) to account for the correlations over alternatives (Li et al., 2016).\nWith strong theoretical foundations, random utility models have been widely applied to model heterogeneity (e.g., Bhat, 2000; Bhat et al., 2016; Li et al., 2016; Srinivasan and Mahmassani, 2003; Vij and Walker, 2016). For instance, Bhat (2000) took into account observed and unobserved heterogeneity for modeling urban work travel mode choice. Srinivasan and Mahmassani (2003) proposed a dynamic kernel logit formulation to analyze heterogeneity and unobserved structural effects in route-switching behavior. To capture the disaggregate decision-making more accurately, researchers have used the integrated choice and latent variable models in assessing heterogeneous travel behavior (Vij and Walker, 2016).\nNevertheless, since random utility models often have low prediction performance (Hagenauer and Helbich, 2017; Zhao et al., 2018), one may think that the behavioral insights generated from them are less trustworthy than those based on models with higher predictive accuracy. Moreover, recent studies have suggested that, unlike conventional random utility models that require extensive modeling effort and domain knowledge to accommodate individual heterogeneity, machine learning models can account for it automatically. For example, Lhe\u0301ritier et al. (2018) compared the random forest (RF) model with the latent class multinomial logit model through a series of experiments, and found that the RF model has the ability of segmenting population groups (with heterogeneous tastes) automatically. Therefore, it would be worthwhile to study the application of interpretable machine learning techniques to examine individual taste heterogeneity."
    },
    {
      "heading": "2.3. Interpretable Machine Learning",
      "text": "Interpretable machine learning is receiving increasing attention in recent years (e.g. Athey, 2017; Doshi-Velez and Kim, 2017; Du et al., 2018; Molnar, 2018; Murdoch et al., 2019; Wager and Athey, 2018; Zhao and Hastie, 2017). In particular, Murdoch et al. (2019) defined interpretable machine learning as applying machine-learning methods to extract relevant knowledge about the domain relationships contained in the data.\nThe methods for machine-learning interpretability may be divided into two categories, i.e., intrinsic and post hoc. As discussed in Molnar (2018), intrinsic interpretability usually refers to relatively simple machine-learning models that are considered interpretable due to their simple model structure, such as linear regression, logit models, and decision trees. On the other hand, post hoc interpretability of a machine-learning model is achieved by applying interpretation methods after its training and application. The machine-learning interpretation methods can also be divided into model-specific or model-agnostic. Modelspecific methods can only be applied to a specific class of models, while model-agnostic methods can be applied to any machine-learning models after training. Since model-agnostic interpretation methods have lots of flexibility compared to their dedicated counterparts and can provide consistent interpretability criteria for any model class, this paper focuses on applying and inventing model-agnostic interpretation methods to explain individual travel behavior.\nOne of the most prevalent model-agnostic methods is the PDP, which presents the dependence between the response variable and a set of input features, marginalizing over the values of the remaining features (Friedman, 2001). As an extension of PDP, Goldstein et al. (2015) proposed another model-agnostic method\u2014the ICE plots\u2014to reveal the potential individual heterogeneity by generating one curve per observation that presents how its prediction evolves when a feature changes. Notably, PDPs and ICE plots were recently proved to be effective to reveal causal inference between input features and the response variable (Zhao and Hastie, 2017). In addition, Wager and Athey (2018) assessed estimation and inference of heterogeneous treatment effects using RF. However, PDPs and ICE curves focus on all the instances under evaluation without looking at the specific groups of people to gain additional insights on taste heterogeneity across different population groups. Therefore, this paper introduces two new model-agnostic methods as an extension of PDP and ICE plots, in order to better uncover the taste heterogeneity within and across different population segments.\nSome model-agnostic methods have been applied in some of the existing literature of travel behavior modeling, such as Hagenauer and Helbich (2017); Wang and Ross (2018). However, their discussion mainly focused on variable importance (measures the importance of a feature for prediction). Our prior work (Zhao et al., 2018) showcased how to apply PDPs to evaluate the marginal impacts of the selected features. However, to our knowledge, no existing work focuses on applying existing machine-learning interpretation tools or developing new ones to reveal heterogeneous travel behavior for informing the design of MOD Transit and policy analysis."
    },
    {
      "heading": "3. Methodological Framework",
      "text": "This paper is interested in the following research question: What factors and how they shape individual willingness to switch to a new transportation mode? The paper approaches this question using the following methodological framework. It assumes the availability of a longitudinal dataset that captures individual travel mode choice before and after a new mobility option is introduced. If the new mobility service is not yet deployed, a stated-\npreference (SP) survey can be conducted to capture individual preferences for the new travel mode. The data can be represented as {xi, yi}Ni=1, where xi = [xi1, ..., xip] is a vector of p features for individual i and yi is the response variable. The features xi often include socio-economic and demographic information, travel preference, current travel mode, and the level-of-service variables for each travel mode under evaluation. The response variable yi is binary: Value 0 indicates that individual i stays with her current mode and value 1 indicates that individual i switches to the new travel mode."
    },
    {
      "heading": "3.1. Choice Modeling with Machine Learning",
      "text": "Choice modeling with machine learning is typically approached as a classification problem (Hagenauer and Helbich, 2017; Xie et al., 2003; Zhao et al., 2018). Commonly used classification models include logistic regression (logit) (Hastie et al., 2001), Support Vector Machines (SVM) (Cortes and Vapnik, 1995), RF (Breiman, 2001), and BOOST (Friedman, 2001). The classification approaches can be divided into two categories, i.e., soft and hard classification (Liu et al., 2011; Wahba, 2002). Soft classification estimates the class conditional probabilities first and then predicts the class based on the largest estimated probability (Liu et al., 2011). On the other hand, hard classification predicts the class labels directly without estimating intermediate class probabilities. Most prior work in machine learning for choice modeling are based on hard classification (e.g. Tang et al., 2015; Wang and Ross, 2018; Xie et al., 2003). However, it is more natural to use class probabilities (estimated by soft classification) to predict market shares, especially when the sample size is small. For example, if the sample population contains a hundred people for which the predicted switching probabilities are all 0.51, a hard classification will predict switching in 100% of the cases, while a soft classification would concludes that switching occurs in 51% of the cases.\nThis paper treats the prediction of travel mode switching as a soft classification problem. The classifier f(x|\u03b8\u0302) (where \u03b8\u0302 is an estimated parameter or hyperparameter vector) maps the features x to the response variable y using the predictions of class probabilities, i.e.,\ny\u0302i = arg max k\u2208{0,1} p\u0302i,k (1)\nwhere p\u0302i,k is the predicted choice probability for class k (k \u2208 {0, 1}) of observation i (i = 1, 2, ..., N).\nThe predictive accuracy at the individual level of different classifiers is evaluated using the formula\nN\u2211 i=1 Iyi(y\u0302i)/N, (2)\nwhere Iyi(y\u0302i) is an indicator function which equals to 1 when y\u0302i = yi. The predicted market share for class k is computed using the formula\nQk(x|\u03b8\u0302) = 1\nN N\u2211 i=1 p\u0302ik (3)\nthat averages the predicted choice probabilities for all the instances. The predictive accuracy at the aggregate level is evaluated using the L1-Norm, i.e.,\n1\u2211 k=0 \u2223\u2223\u2223Q\u2217k \u2212Qk(x|\u03b8\u0302)\u2223\u2223\u2223, (4) where Q\u2217k represents the observed market share for choice k \u2208 {0, 1}.\nThe training, validation, and testing of the classifiers, as well as the model selection, are discussed in detail in Subsection 4.3."
    },
    {
      "heading": "3.2. Interpreting Heterogeneous Mode Switching Behavior",
      "text": "Soft classification helps the interpretation of heterogeneous switching behavior. This section reviews some existing interpretation techniques, including PDPs and their extensions in ICE curves. In addition, it proposes two new tools for interpretation, CPDPs and CIPDPs. Finally, this section reports marginal effects and elasticities for market segments in order to further understand individual taste heterogeneity."
    },
    {
      "heading": "3.2.1. Partial Dependence Plots (PDPs) and Individual Conditional Expectation (ICE) Plots",
      "text": "PDPs, first proposed by Friedman (2001), are one of the most popular model-agnostic interpretation tools for machine-learning models. Assume that we are interested in determining the effect of a set S \u2282 {1, ..., p} of features on the prediction outcomes and let C be the complement of S (i.e., C = {1, ..., p} \\ S). The partial dependence of classifier f on xS is defined as\nfS(xS) = ExCf(xS,xC |\u03b8). (5)\nIn practice, Eqn. (5) is estimated by computing\nf\u0302S(xS) = 1\nN N\u2211 i=1 f(xS,xCi|\u03b8\u0302), (6)\nwhere xCi(i = 1, ..., N) represent the values of xC for each instance in the training set. The PDP evaluates the influence of xS on f\u0302 after marginalizing over all the other features. For soft classifiers, the PDP displays the class probability (e.g., the switching probability) for each possible value of xS. As discussed in Friedman (2001), the PDP can be a useful summary of the impact of the chosen subset of features when the interactions between the chosen features and the remaining features are weak. However, when the interactions are strong, the PDPs may obscure a heterogeneous relationship created by the interactions (Goldstein et al., 2015).\nTo complement PDPs, Goldstein et al. (2015) proposed ICE plots to capture the potential individual heterogeneity. Instead of plotting the average partial dependence on the predicted response, the ICE curve generates an estimated conditional expectation curve\nf\u0302 iS(xS) = f(xS,xCi |\u03b8\u0302), (7)\nfor each instance Ci (i = 1, . . . , N) in the dataset. The average of all the ICE plots is the corresponding PDP for the selected feature (Molnar, 2018). As ICE plots generate individual-specific curves, it can be used directly to understand taste heterogeneity.\nPDPs and ICE plots are easy to implement and provide clear interpretations of a classifier. In particular, ICE plots are capable of revealing individual heterogeneity (by producing individual-specific curves), which is an important topic in travel behavior modeling. Furthermore, as discussed by Zhao and Hastie (2017), PDPs and ICE plots may reveal causal relationships if f is an accurate classifier and domain knowledge supports the underlying causal structure.\nIt is important to point out that PDPs can be thought as a counterpart in machine learning relative to the beta coefficients in a logit model. A PDP graphically illustrates the relationship between an input feature and the response variable. For linear machine-learning models, the PDP would be a straight line, whose slope is equivalent to a beta coefficient; for nonlinear models, the PDP would be a curvy line with different beta coefficients (i.e. tangent of the line) at different data points. To compare the results of PDP from nonlinear machine-learning models with the beta coefficient in a logit model, we propose to use a straight line to approximate the relationship displayed in the PDP by calculating a single slope for the PDP using:\np\u0302max1 \u2212 p\u0302min1 xmax \u2212 xmin\n(8)\nwhere xmax and xmin are the maximum and minimum values of a selected feature, and p\u0302max1 and p\u0302 min 1 are the corresponding estimated switching probabilities at xmax and xmin respectively. Note that the beta coefficients of a logit model are in the logit region (or log-odds region), while the the slopes of PDPs are in the probability domain."
    },
    {
      "heading": "3.2.2. Conditional Partial Dependence Plots (CPDPs) and Conditional Individual Partial Dependence Plots (CIPDPs)",
      "text": "This paper also proposes two new model-agnostic tools for improving the interpretations of classifiers and revealing additional insights in presence of individual heterogeneity: CPDPs and CIPDPs. The key idea behind CPDPs and CIPDPs is to group instances into subpopulations based on some observed features (i.e., a market segmentation approach). These plots further allow researchers to examine response heterogeneity across different population groups.\nThis paper uses the observed socio-demographic or behavioral features to segment the market in order to examine observed heterogeneity. For example, the instances can be grouped by income, gender, or current commuting mode. By plotting the ICE curves within each market segment and computing the corresponding PDP for the subpopulation, it is possible to contrast the behaviors of different population groups and different individuals within these groups.\nMore formally, consider a categorical feature g and its set V of possible values. A CPDP conditioned on feature g is defined as\nfS(xS)|xg=v = ExCf(xS,xC |\u03b8, xg = v) (9)\nfor each value v \u2208 V . This definition can be generalized to a set G of features\nfS(xS)|xg=v = ExCf(xS,xC |\u03b8,xg = v). (10)\nCIPDPs are the conditional counterpart to the ICE curves. Given a feature g and a value v of interest, CIPDPs will display the ICE curves, f jS(xS), for those instances j satisfying xg,j = v, j \u2208 {1, ..., N}. These definitions can be naturally extended to non-categorical attributes by partitioning their domains.\nCompared to PDPs and ICE plots, CIPDPs and CPDPs mainly assess the pre-determined mutually-exclusive subgroups of the training set. By segmenting the market based on the prior knowledge of the travel behavior theory, CIPDPs and CPDPs are expected to be useful to capture diverse behaviors across and within different population groups."
    },
    {
      "heading": "3.2.3. Marginal Effects and Elasticities for Market Segments",
      "text": "Marginal effects and elasticities are widely-used econometric concepts to indicate the sensitivity of an outcome variable with respect to changes in independent variables. In mode-choice applications, they are defined as the changes in the choice probability of an alternative in response to a one unit (percent) change in an independent variable. These tools can be applied to machine-learning classifiers too, as shown in Zhao et al. (2018). The marginal effects and arc elasticities of feature xt, t = 1, ..., p, for class k can be computed as:\nMk(xt) = Qk(x\u2212t,xt + \u03b4|\u03b8\u0302)\u2212Qk(x|\u03b8\u0302)\n|\u03b4| , (11)\nEk(xt) = [Qk(x\u2212t,xt \u00b7 (1 + \u03b4)|\u03b8\u0302)\u2212Qk(x|\u03b8\u0302)]/Qk(x|\u03b8\u0302)\n|\u03b4| , (12)\nwhere x\u2212t \u2208 Rp\u22121 represents the complement set of xt and \u03b4 is a constant. In order to uncover heterogeneity across different population groups, one can also compute marginal effects and elasticities for different market segments instead of for the entire population. For instance, for a categorical feature g and its potential value v, the marginal effects and elasticities can be defined as\nMk(xt)|xg=v = Qk(x\u2212t,xt + \u03b4|\u03b8\u0302, xg = v)\u2212Qk(x|\u03b8\u0302, xg = v)\n|\u03b4| , (13)\nEk(xt)|xg=v = [Qk(x\u2212t,xt \u00b7 (1 + \u03b4)|\u03b8\u0302, xg = v)\u2212Qk(x|\u03b8\u0302, xg = v)]/Qk(x|\u03b8\u0302, xg = v)\n|\u03b4| . (14)\nAs discussed by Zhao et al. (2018), some machine-learning classifiers, such as tree-based models, split input feature values at different nodes. Therefore, the prediction decisions for these models become insensitive to changes in feature value outside its range. As a result, this paper only predicts the marginal effects and elasticities for instances within the data range. Subsection 5.4 provides more details on this topic."
    },
    {
      "heading": "4. Case Study",
      "text": ""
    },
    {
      "heading": "4.1. The Data",
      "text": "The case study uses data collected from a SP survey by faculty, staff, and students at the University of Michigan, Ann Arbor. The survey first asked the participants to estimate the travel time, cost, and wait time for their commuting trip from one of the following modes: Car, Walk, Bike, and Bus. Then, by showing them a new MOD Transit system that would replace the existing transit system, the survey asked them what travel mode (i.e., Car, Walk, Bike, and MOD Transit) they might choose in a different state-choice experiments (with different levels of service for MOD Transit). The detailed survey description with graphical illustrations can be found in Yan et al. (2018).\nThis paper aims at evaluating the factors underlying individuals\u2019 intention to switch to the new MOD Transit system. That is to say, some travel behavior changes, such as switching from Car to Bike, is not of interest in this study. Hence, the outcomes of the state-choice experiments are expressed as binary answers, where value 0 represents the decision of not switching to MOD Transit and 1 denotes the decision of switching to MOD Transit. MOD Transit is considered as a new travel mode here, that is to say, individuals who currently use the bus are considered as switch to MOD Transit if he or she select the new mode.\nThere were 8,141 data points collected from 1,163 individuals. The statistics for 16 features and the response variable are given in Table 1. The feature \u201cCurrent Mode Bus\u201d (indicates whether the current travel mode is Bus) is not included for analysis, since this\nfeature is completely correlated with the other three features: \u201cCurrent Mode Car,\u201d \u201cCurrent Mode Walk,\u201d and \u201cCurrent Mode Bike,\u201d with the sum of the four features equal to 1. All the variables have the variance inflation factor less than 5 (a threshold commonly referenced), which suggests that multicollinearity is not a concern.\nBased on the observed socio-demographic and behavioral characteristics, there are different ways to segment the market to study individual heterogeneity. Some possible market segmentation approaches include grouping people by different income levels, car ownership, gender, or commonly-used commuting modes. In particular, our previous study (Zhao et al., 2018) has found out that, for the multinomial logit model, the dummy variables of the current travel modes are positive for all the four modes and statistically significant for Car, Walk, and Bike. These results indicate that travelers may present an inertia to their current modes. Moreover, as an exploratory analysis, Figure 1 presents a chord diagram illustrating graphically the inter-relationships between switching decisions and current travel modes. It is obvious that different market segments show different ratios of switching. Therefore, as an illustration, this paper chooses to segment the market using the current travel mode and shows how to apply interpretable machine learning to reveal individual heterogeneity in mode-switching behavior under a proposed MOD Transit system."
    },
    {
      "heading": "4.2. Machine-Learning Classifiers",
      "text": "Seven soft machine-learning classifiers are selected for comparison: They include logit, naive Bayes (NB), classification and regression trees (CART), bagging trees (BAG), BOOST, RF, and NN. This subsection briefly summarizes these classifiers: It may be skipped by those\nfamiliar with these techniques. The logit model is arguably the most popular classifier to predict a binary outcome (i.e., switching or not switching) (Hastie et al., 2001). The logit model assumes a linear relationship between the log-odds and input features, facilitating the interpretation of the results and the derivation of policy interventions. However, the linear nature of this classifier may not reflect the true relationship between the log-odds and input features, and the logit model may exhibit a relatively low predictive accuracy.\nThe NB model is also widely-used for classification. It assumes that all features are independent (McCallum et al., 1998). NB is easy to construct and is often used as a baseline classifier. However, its assumption is often violated in practice, making it sensitive to highly correlated features.\nThe CART model builds a classification tree, where each internal node partitions the data based on the value of a selected feature and leaves capture a class decision (e.g., switching or not switching in the case study) (Breiman, 2017). The decision tree is susceptible to overfitting (Quinlan, 2014) and pruning techniques can control its complexity. In this study, the trees are grown without pruning, since they are very simple, i.e., less than 5-6 leaves in most cases.\nBreiman (1996) and Hastie et al. (2001) proposed a number of tree-based ensemble methods to overcome the limitations of CART classifiers by providing more accurate, stable, and robust models. There are three major ensemble models, including BOOST, BAG, and RF. Specifically, for classification problems, BOOST models create a sequence of decision trees and each successive tree is designed to improve the predictive accuracy of its predecessor. The final prediction of the BOOST model is the weighted voting among all trees. Compared to CART, the BOOST model usually produces a higher predictive accuracy. This study applies gradient boosting (Friedman, 2001). 500 trees are used, with shrinkage parameter set to 0.062 and interaction depth to 45. The minimum number of observations in leaves is 10. On the other hand, BAG and RF train a set of trees using bootstrapping (i.e., sampling with replacement) (Breiman, 1996; Ho, 1998). The only difference between BAG and RF is that BAG uses all features to train the trees while RF only selects a random subset of all the features to train the trees. For a classification problem, multiples decision trees are trained, and the majority voting among all the trees is the prediction outcome. By using bootstrapping, the BAG model can reduce the variance and overfitting problems of a single decision tree. However, by assuming variable independence, BAG cannot reduce the variance for correlated features. By contrast, RF may overcome this limitation and reduce the variance between correlated trees. For the BAG model, 500 classification trees are trained, with each tree grown without pruning. For the RF model, 600 trees are used and 14 randomly selected variables are considered for each split at internal nodes.\nA basic NN model with three layers of nodes (each node is binary) was also considered. NN has an input layer, a hidden layer, and an output layer. Each node connection between adjacent layers has a weight. The hidden layer of the NN model can help measure nonlinear relationships between features and the response variable. However, NN is also susceptible to overfitting. In the paper, a NN model with a single hidden layer of 14 units is used. The connection weights are trained by back propagation with a weight decay constant of 0.1.\nAll the modeling and analyses are conducted in R, using following packages: stats (R Core Team, 2018), e1071 (Meyer et al., 2017), tree (Ripley, 2016), gbm (Ridgeway, 2017), randomForest (Liaw and Wiener, 2002), and nnet (Venables and Ripley, 2002)."
    },
    {
      "heading": "4.3. Training, Validation, and Testing for the Classifiers",
      "text": "To identify the best-performing model, this study trained, validated, and tested the seven machine learning classifiers using the procedure illustrated in Figure 2. First, 10% of the data is randomly drawn for the testing set using stratified sampling based on the current mode choices. In other words, the entire data set is divided into four mutually-exclusive subpopulations based on their current mode choices, i.e., Car, Walk, Bike, and Bus. Within each subpopulation, 10% samples are randomly drawn for testing.\nNext, the remaining 90% of the data is used to train the model and tune hyperparameters using a 10-fold cross validation. To conduct the 10-fold cross validation, the training set is first randomly split into 10 disjoint subsets. Then, one subset is held out for validation while the remaining nine subsets are used for training the machine learning classifiers. After repeating the same process for each one of the 10 subsets, the validation outcomes for each classifier are average to obtain a mean estimate of the performance metric (e.g., the predictive accuracy). The model with the best performance metric is selected and is fitted on the entire training set (i.e., 90% of the entire data set). Finally, the selected model is applied to the testing set to provide an unbiased evaluation of its predictive capability."
    },
    {
      "heading": "5. Model Interpretation",
      "text": ""
    },
    {
      "heading": "5.1. Predictive Accuracy",
      "text": "The cross-validation results of seven machine learning classifiers are shown in Figure 3. With respect to the mean predictive accuracy (red lines in Figure 3), BOOST has the best\noutcome (0.871), followed by RF (0.860) and BAG (0.859). By contrast, the mean accuracy of the logit model is only 0.750. The model with the worst performance is CART (0.677).\nThe BOOST model is thus selected and fitted on the entire training set. Then, the BOOST model is evaluated on the testing set and the results are presented in Table 2. The results show that the overall accuracy at the individual level is 0.893 with an accuracy of 0.808 for switching and 0.934 for non-switching predictions. By using soft classification to predict market shares, the overall L1-Norm is 0.02695, indicating that the least absolute\ndeviation of the market share prediction is less than 3%. Table 2 also reports the predictive capabilities of the BOOST model for different market segments (segmented by current travel mode). The testing set is divided into four mutuallyexclusive subsets obtained using the current travel mode. For the overall accuracy and for the true negative rate, i.e., the rate of successfully predicting the \u201cnon-switching outcome,\u201d the results show that BOOST performs better for individuals who currently use Car, Walk, and Bike; on the other hand, BOOST performs better in successfully predicting the \u201cswitching\u201d outcome (i.e., true positive rate) for individuals who currently use Bus. Moreover, the prediction accuracy is more balanced (i.e., true positive rate and true negative rate are similar) for individuals using Car and Bus than individuals using Walk and Bike. One possible explanation for the relatively lower performance in predicting the switching behavior of those who currently walk or bike is the low mode-switching rates of these individuals in the training set (Walk: 20.26%; Bike: 13.45%), which resulted in an imbalanced classification problem. Properly handling the imbalanced classes in machine learning is a crucial research topic, and is an important topic for future work."
    },
    {
      "heading": "5.2. Partial Dependence Plots (PDPs) and Conditional Partial Dependence Plots (CPDPs)",
      "text": "The PDPs and CPDPs of the level-of-service variables (i.e., TT MOD, Wait Time, Transfer, and Rideshare) for MOD Transit are presented in Figure 4. The y-axis is the probability of switching to MOD Transit, while the x-axis is a level-of-service variable for the proposed system. The blue lines in Figure 4 are the PDPs, while the remaining lines are CPDPs for different market segments (Car: red; Walk: purple; Bike: pink; and Bus: yellow).\nThe PDPs have the expected decreasing trend for all the level-of-service variables: As the level-of-service for MOD Transit gets worse, the preference for MOD Transit declines for the entire market and for each market segment.\nFor TT MOD (see Figure 4a), the corresponding PDPs and CPDPs present strong nonlinearities for the entire market and the four market segments. The probability of switching remains largely unchanged when the transit time is less than 10 minutes. For Walk and Bike, the switching probability decreases faster from 10 minutes to 20 minutes compared to that from 20 minutes to 34 minutes. For Car and Bus, the switching probability present an approximately linear decrease after 10 minutes. These results show that the MOD Transit system is highly desirable across different market segments when the transit time is relatively small (i.e., less than 10 minutes). In addition, there exists some non-smooth perturbations in the PDPs and CPDPs, even though the general trend is decreasing. This is probably caused by the tree structure of the BOOST model. For Wait Time and Transfer, some nonlinearities are also present as illustrated in Figure 4b-4c. To be specific, for all the subpopulations, the switching probability has larger decrease for Wait Time from 3 minutes to 5 minutes than that from 5 minutes to 8 minutes. In addition, within the analysis range for Transfer (i.e., 0\u20132), the probability of switching to MOD Transit has larger decline for the second transfer than the first transfer. One insight is that one may consider limiting the number of transfers to at most one when designing a new MOD Transit system.\nThese results demonstrate that PDPs and CPDPs are valuable tools for behavioral analysis: They can readily reveal the nonlinear relationships between the outcome variable (i.e.,\nswitching probabilities) and the independent variables of interest (i.e. level-of-service variables).\nTable 3 presents the approximate global slopes of the PDPs and CPDPs, which can be viewed as being comparable to the beta coefficient estimates in the random utility models. The approximate slopes of Transfer and Rideshare show that Transfer has a larger impact on the entire market and all the population segments. Among the four market segments, Transfer has the most impact on the existing Car and Bus users, which indicates that vehicle riders are more sensitive and reluctant to transfers. Moreover, the last column of Table 3 shows that Car users are most reluctant to additional pickups. One possible explanation is\nthat Car users value privacy the most and are less willing to rideshare than other population segments. Travelers that used to ridesharing, such as Bus users, are not very sensitive to Rideshare. The approximate slopes for TT MOD show that Car and Bus users have the same preference (\u22120.023), while Walk and Bike users are similar in their preferences (\u22120.013 and \u22120.014). The results are intuitive since Car and Bus belong to motorized modes, while Walk and Bike are similar in nature and often combined together into one soft mode (Omrani, 2015). The approximate global slopes of TT MOD and Wait Time indicate that Wait Time has smaller impact on the entire market and all the subpopulations. One possible explanation is that on-demand shuttles in the new MOD Transit system are requested via webpage or mobile phones: Hence Wait Time may be perceived as the active waiting time, resulting in smaller penalties for MOD Transit. In addition, existing Car users have the largest slope (\u22120.013) compared to other modes. Traveling by fixed-route bus requires one to walk to and wait at bus stops and existing walkers and bikers are used to traveling outside, but Car users, by contrast, usually spend very little out-of-vehicle travel time, which may make them more sensitive to Wait Time (Hitge and Vanderschuren, 2015)."
    },
    {
      "heading": "5.3. Individual Conditional Expectation (ICE) Plots and Conditional Individual Partial Dependence Plots (CIPDPs)",
      "text": "To further reveal individual taste heterogeneity (response heterogeneity to different trip attributes), we randomly sampled 100 instances from each subpopulation (by existing travel mode) and constructs ICE plots of the level-of-service variables for MOD Transit. The resulting 400 instances are shown in Figure 5a. The ICE plots show extensive response heterogeneity. However, it is hard to conclude whether the ICE curves differ between individuals since all the curves start at various predictions, especially for TT MOD. Therefore, to uncover individual heterogeneity more reliably (and more clearly), Figure 5b uses centered ICE (C-ICE) plots: They center the plots around a certain point within the range and display only the difference in the prediction with respect to this point (Goldstein et al., 2015; Molnar, 2018). The resulting C-ICE plots shows that some people are behaving very differently from the majority of observed individuals.\nFigures 6 and 7 present the CIPDPs of different level-of-service variables for the market segments determined by the current travel mode. For TT MOD, individuals in the Car and Bus segments exhibit more homogeneous trend of switching behavior, as all curves seem to follow the similar pattern and there are no obvious interactions. These results show that CPDPs for these two modes provide a good summary of the relationships between TT MOD\nand the predicted switching probabilities well. For Walk and Bike segments, the majority of the subpopulation is following the similar trend, but there are a few individuals who behave differently from the rest of the subpopulation. For example, for Walk, the switching probabilities of several individuals do not decrease until around 30 minutes transit time.\nFor Wait Time, all four market segments present response heterogeneity. Many Car users have a significant decrease in switching probability from 3 minutes to 5 minutes of waiting time, while many others do not seem to be sensitive to waiting time at all. Many walkers are similar in behavior to drivers with a few exceptions: They have a consistent decrease from 3 minutes to 8 minutes Wait Time. For Bike users, the results are interesting: Most travelers are lumped at the bottom, showing strong intrinsic preference for not switching. On the other hand, a dozen bikers have the most decrease from 3 minutes to 5 minutes Wait Time.\nMany public transit users present a steady decrease from 3 minutes to 8 minutes of waiting time, while a few of them have the most decrease from 3 minutes to 5 minutes.\nFor Transfer and Rideshare, significant response heterogeneity exist within and across different subpopulations. For Car users, a significant amount of individuals have a larger decrease in switching probabilities for the second Transfer/Rideshare, while some others have the most decrease for the first Transfer/Rideshare. Most walkers have a consistent\ndecrease as Transfer changes from 0 to 2 and have the most signifcant decrease for the first Rideshare. Most bikers present no interest of switching to MOD Transit, with some of them showing a consistent decrease for Transfer and Rideshare. Lastly, most Bus users show larger decreases in switching probability on the second Transfer, while a few of them have larger decreases for the first Transfer. In terms of Rideshare, many display a consistent decrease, while some of them have the most decrease for the first additional pickup.\nHowever, some individual responses seem to be unrealistic: Taking Transfer as an example, some individuals in Walk and Bus segments exhibit increases in switching probabilities as Transfer changes from 0 to 1, and the switching probabilities decrease significantly as Transfer changes from 1 to 2. Figure 8 applies a two-dimensional segmentation to understand this anomaly. It shows that many more anomalies for students than faculty, indicating that some students may have misreported some of their preferences. This also illustrates the benefits of CPDPs and CIPDPs in zooming on the results to build a better understanding.\nWith high predictive accuracy among all the market segments (over 86%) and reasonable taste heterogeneity patterns revealed above, it may be argued that the BOOST model segments the entire population and capture heterogeneity automatically ; that is to say, the BOOST model accounts for individual heterogeneity by itself without explicit modelspecification efforts from the modeler. This claim is consistent with the findings in Lhe\u0301ritier et al. (2018), which has shown that the RF model captures segments in an automated way, by comparing RF with the latent class multinomial logit model. As discussed in Subsection 4.2, BOOST, BAG, and RF are all tree-based ensemble models with some differences."
    },
    {
      "heading": "5.4. Marginal Effects and Elasticities by Current Travel Mode",
      "text": "As discussed in Subsection 2.2, market segmentation is a widely-used approach to reduce the large number of instances being dealt with into a manageable number of mutually-\nexclusive groups that share well-defined characteristics (Anable, 2005). After applying market segmentation to identify different groups, it becomes possible to make predictions about their responses to various conditions and generate better-targeted policies. Therefore, this subsection applies market segmentation to marginal effects and elasticities (organized by the current travel mode), to evaluate how different subpopulations react to system changes.\nTable 4 presents the marginal effects and elasticities by current travel mode for the level-of-service variables of MOD Transit. As discussed in Subsection 3.2.3, tree-based models (such as the BOOST model) cannot make \u201cout-of-bound\u201d predictions: Hence only the marginal effects and elasticities for the instances within the data boundary are presented. For instance, when Transfer is under evaluation, only instances with no or one transfer are considered when computing the marginal effects for one unit increase, since no data is available on three transfers. By contrast, when computing the marginal effects for one unit decrease, only those instances with one or two transfer(s) are extracted for analysis. In this analysis, Transfer, Rideshare, and Wait Time1 are treated as discrete features and TT MOD is treated as a continuous feature. Marginal effects are only computed for continuous variables, since it is not meaningful to analyze 1% increase or decrease for the discrete variables. Note also that Wait Time uses a \u22122 unit instead of \u22121 unit because it can only take three values separated by two units.\nAs shown in Table 4, the marginal effects of TT MOD are largely consistent across different market segments. In the literature, in-vehicle travel time was often used as a benchmark to evaluate the penalty of other level-of-service variables (Iseki and Taylor, 2009). This paper however uses TT MOD as the benchmark instead. The travel time of MOD Transit consists of two parts, including in-vehicle travel time and out-of-vehicle travel time, and the out-of-vehicle travel time is typically found to have more negative impacts on choosing public transit, compared to the in-vehicle travel time (Yan et al., 2018). Therefore, when using TT MOD to evaluate the penalty of other variables, it is expected to have smaller values compared to previous findings in the literature (which often use in-vehicle time instead). In\n1Wait Time only takes on three different values, i.e., 3, 5, and 8 minutes, in the survey.\naddition, compared to the current transit users, the elasticities of TT MOD are larger for individuals who are currently driving, walking, and biking to work, showing their relatively lower preferences for switching to MOD Transit.\nThe marginal effects of Wait Time are relatively small across different travel modes, with Car users having the largest marginal effects (\u22122.95% for +1 unit and 1.68% for \u22122 unit). As discussed above, a possible explanation is that drivers are most sensitive to out-of-vehicle travel time. In addition, the results for +1 unit and \u22122 unit display noticeable differences for marginal effects of Wait Time. A possible reason is the strong nonlinearity of Wait Time. In general, the penalty of Wait Time seems small in our case study, which is consistent with our previous findings (see CPDP results for Wait Time).\nFor the entire market, the marginal effect results indicate that one transfer can be converted into 2.0\u20133.5 minutes MOD travel time (including both in-vehicle and out-of-vehicle travel times). Even though the values are relatively small, some previous studies have similar findings (see Iseki and Taylor (2009)). Rideshare has relatively smaller impacts compared to Transfer, which can be converted into 1.3\u20131.6 min of TT MOD. In other words, 1 Transfer is equivalent to 2 additional pickups, which is somewhat as expected since many people may prefer a longer in-vehicle travel time for Rideshare to a shorter out-of-vehicle travel time for Transfer.\nOn the other hand, Transfer and Rideshare present distinct impacts on different market segments. For Car and Bus users, 1 Transfer can be converted into 3.0\u20133.2 minutes of TT MOD (Car) and 2.8\u20133.5 minutes of TT MOD (Bus) respectively. 1 Rideshare is equivalent to 2.7\u20132.8 minutes TT MOD for drivers and 0.8\u20131.0 minutes of TT MOD for public transit users. The results show that existing populations who are using motorized modes to commute are most reluctant to transfers. This is consistent with our prior observations and may be explained by an increased awareness about potential delays caused by transfers in these population segments. Moreover, Rideshare has a significant negative impact on Car users indicating, once again, that Car users may value privacy the most, while people used to share rides (e.g., Bus riders) are less affected.\nBy contrast, one transfer is equal to 1.0\u20132.4 minutes of TT MOD for walkers and 1.2\u20131.4 minutes of TT MOD for bikers. One rideshare can be converted into 1.2\u20131.8 minutes of TT MOD for walkers and 0.6\u20130.8 minutes TT MOD for bikers. These results are relatively small, and a possible explanation is that Walk/Bike users are more likely to be active commuters, who value sustainable transport and promote an environmentally friendly lifestyle. As a result, transfers (involving out-of-vehicle walking and waiting time) and rideshares (involving carpooling) may help reduce traffic and CO2 emission\u2014aligning with their values and promoting a more sustainable public transit system. Therefore, walkers and bikers are not very reluctant to take transfers or rideshares."
    },
    {
      "heading": "5.5. Summary of Key Findings",
      "text": "The application of various model-agnostic interpretation tools to a machine-learning model with high predictive accuracy demonstrates that significant taste heterogeneity exist within and across different subpopulations, as illustrated by market segmentation using\nthe current travel mode. Arguably, the machine-learning model can segment the entire population and accommodate individual heterogeneity in an automated way.\nIn terms of behavioral insights, an important finding is that the existing Car and Bus users are more sensitive to transfers than pedestrians and cyclists. Another finding is that existing drivers are more reluctant to share rides with others, perhaps due to a higher preference for privacy."
    },
    {
      "heading": "6. Conclusion",
      "text": "This paper studied the potential of machine-learning classifiers to predict and explain travel mode switching behavior in heterogeneous markets. It demonstrated that machine learning significantly outperforms the logit model on a case study in terms of prediction. Moreover, the paper demonstrated that it is reasonable to claim that BOOST, the most accurate model in terms of out-of-sample prediction, automatically segments the market, providing key insights on various population segments at no cost. The paper also highlighted that the BOOST results can be interpreted by existing model-agnostic tools, such as PDPs and ICE plots. Furthermore, the paper introduced two new tools, CPDPs and CIPDPs, to extend PDPs and ICE curves to various subgroups using market segmentation. Results on the case study indicated that the machine-learning classifier and the interpretation tools may help reveal individual heterogeneity in order to facilitate decision making.\nWe identify three potential directions for research research. The first research avenue can addresses the fact that PDPs and ICE plots assume the independence of features under evaluation from the remaining features. However, a certain level of correlation among variables exists in nearly every real-world dataset. Taking our dataset as an example, TT MOD is somewhat correlated with other travel time variables, since the origin-destination distance is the same. To overcome this issue, a potential direction is to apply the accumulated local effects (ALE) plot (Apley, 2016), by only visualizing how the model predictions change in a small \u201cwindow\u201d around a particular feature value. This idea can be applied to PDPs, ICE plots, and their generalizations proposed in the paper. It should lead to new model-agnostic interpretation tools to address this independence assumption. The second direction is to use the information gained from the PDP, ICE, CPDP, and CIPDP of black-box models to design the utility functions of the logit models automatically, thus enhancing their model performance. Lastly, there was an imbalanced classification problem in our case study, and similar problems can be found in many other previous studies that focused on travel behavior modeling, such as Hagenauer and Helbich (2017); Wang and Ross (2018); Xie et al. (2003). Future research should study and tackle this problem in a comprehensive and systematic way."
    },
    {
      "heading": "Acknowledgements",
      "text": "This research was partly funded by the Georgia Institute of Technology, the Michigan Institute of Data Science (MIDAS), and Grant 7F-30154 from the Department of Energy."
    }
  ],
  "title": "Modeling Heterogeneity in Mode-Switching Behavior Under a Mobility-on-Demand Transit System: An Interpretable Machine Learning Approach",
  "year": 2019
}
